header:
  version: 11

build_system: oe

repos:

  bitbake:
    url: https://git.openembedded.org/bitbake
    refspec: 1d7360031164f04887c792fb0b2dd86c6ccfcc23
    layers:
      .: excluded

  freedom-u-sdk:

  openembedded-core:
    url: https://git.openembedded.org/openembedded-core
    refspec: bbcd56bace90f4a148960a7108dc8d0e6c364903
    layers:
      meta:

  meta-clang:
    url: https://github.com/kraj/meta-clang.git
    refspec: 79d26d1f33fe3a70cf8a24a74a93771edd18b4f0
    layers:
      .:

  meta-sifive:
    url: https://github.com/sifive/meta-sifive.git
    refspec: 5388bbcbcec0c787c6154b313a71b826a300e21a
    layers:
      .:

  meta-openembedded:
    url: https://git.openembedded.org/meta-openembedded
    refspec: f8342855a440fa5c4194fc57285e8db9e034fcaa
    layers:
      meta-filesystems:
      meta-gnome:
      meta-multimedia:
      meta-networking:
      meta-python:
      meta-oe:
      meta-xfce:

  meta-tensorflow-lite:
    url: https://github.com/NobuoTsukamoto/meta-tensorflow-lite.git
    refspec: e7a78b7d4a400f7b447c5ce6e2d837d6fa7b2341

  meta-virtualization:
    url: https://git.yoctoproject.org/meta-virtualization
    refspec: c138943fed29e768df990061c30d6f071b98ffc3
    layers:
      .:

distro: freedom-u-sdk

env:
    TEMPLATECONF: ../freedom-u-sdk/conf/templates/default

local_conf_header:
  freedom-u-sdk-common: |
    USER_CLASSES:append = " buildhistory buildstats buildstats-summary"
    EXTRA_IMAGE_FEATURES ?= "debug-tweaks allow-empty-password allow-root-login bash-completion-pkgs dev-pkgs doc doc-pkgs ssh-server-openssh tools-sdk"
    INHERIT:append = " rm_work"
    RM_OLD_IMAGE = "1"
    IMAGE_INSTALL:append = " apt autoconf bash bash-completion cmake cpio dhcpcd dosfstools dpkg dtc e2fsprogs elfutils gcc gdb gzip logrotate net-tools ninja opensbi-sifive openssh pixman pm-utils python3 python3-build python3-cython python3-dtc python3-git python3-installer python3-jinja2 python3-maturin python3-numpy python3-pip python3-setuptools rsync rust sudo tzdata unzip wget which xset xz zip zlib"

  qemu-native: |
    PACKAGECONFIG:append:pn-qemu-system-native = " sdl"
    PACKAGECONFIG:append:pn-nativesdk-qemu = " sdl"

  sdk: |
    CONF_VERSION = "2"

  tensorflow: |
    BAZEL_TARGET_CPU:riscv64 = "riscv64"
